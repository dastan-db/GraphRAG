<task type="auto">
<name>Knowledge graph extraction pipeline</name>
<files>src/extraction/extraction.py notebooks/02_Build_Knowledge_Graph.py notebooks/spikes/02_Interactive_Debug.py</files>
<action>
Build knowledge graph extraction: aggregate verses into chapters, extract
entities (Person, Place, Event, Group, Object, Concept) and relationships
via ai_query() with structured output (responseFormat), deduplicate entities
by normalized slug, build verse-level entity mentions via keyword search.
Extraction prompts and slugify() in src/extraction/extraction.py; pipeline
orchestration in the notebook. Create companion debug notebook with inlined
config and diagnostic cells for interactive schema inspection.
</action>
<verify>Notebook 02 creates entities, relationships, and entity_mentions tables. Entity count ~200-600. Relationship count ~500-2500. Debug notebook runs standalone on any cluster.</verify>
<done>Knowledge graph tables populated; entities deduplicated; debug notebook validates schema.</done>
</task>

<!-- Original plan referenced Tree-sitter Python parser + Neo4j sync.
     Pivoted to LLM extraction via ai_query() + Delta tables.
     This plan updated 2026-02-28 to reflect what was actually built. -->
